# 2024-K-AI-Manufacturing-Data-Analysis
2024 제 4회 k-인공지능 제조데이터 분석 경진대회
- 우수상 수상

## 문제 정의
- 분석내용 : 공정설비 개요, 이슈사항 등 해결하고자 하는 문제 및 분석 목적 기술 ⇒ 불량을 양품으로 판단하는 오류를 작게 만들기 ←불량을 양품으로 판단하는 원인변수 찾기


## 제조데이터 정의 및 처리과정
- 2019년 1월 2일 16:45 - 2019년 3월 31일 23:59
- Row : 92106, Column : 31, passorfail 컬럼이 종속변수
- 전처리과정, 품질지수 측정내용(완전성, 유효성,일관성, 정확성, 무결성) 등
- 새로운 feature 찾기


## 데이터 분석
- AI로 알고리즘을 짜고 공정 제어를 하거나( Ex) 온도 낮춰라, 공정 속도가 빠르다, 입력 조절) 이런 솔루션을 줘도 사람이 대응할 수 있는 한계가 있음
- 실시간으로 측정되는 센서는 전부 공정 센서임. 완성품인 품질을 측정하는 것은 아주 나중에 알 수 있음 ⇒ 재료에 따라 데이터 측정이 다르게 되는데, 재료가 데이터가 입력되지 않아서 학습 결과와 실제 결과가 다르게 나타남. => 재료조건을 알면 더 실제 결과에 근접한 예측 결과를 낼 수 잇있을 것

### 가설

1. 알루미늄합금이다
2. 관련 변수의 범위를 넘으면 faill(1,불량)이 많다 → 실제 예측값과는 상관 없이 범위를 넘으면 품질에 영향이 갈 것임
3. 그러므로 두가지 모델을 구현할 것임
   - 관련 변수의 범위를 고려하지 않은 모델
   -  관련 변수의 범위를 고려한 모델
   -  두 모델의 비교 후 fail point 식별

### 분석 모델
- Decision Tree : 의사결정 규칙을 생성하는 트리 구조의 알고리즘으로, 주어진 데이터를 기준으로 조건을 분할하여 최종적으로 예측 결과를 도출한다.
- RandomForest : 여러 개의 Decision Tree를 앙상블 방식으로 결합하여 예측 성능을 개선하는 모델이다. 각 트리는 서로 다른 데이터 샘플을 사용하여 독립적으로 훈련되고, 이들을 결합하여 최종 예측을 도출한다. 이 방법은 과적합을 방지하고, 예측의 정확성을 높이며, 각 트리의 예측 결과를 평균화하거나 다수결 방식으로 에측 값을 도출한다.
- LSTM + Transformer: LSTM의 장기 의존성 학습 능력과 Transformer의 효율적인 주의 메커니즘을 결합한 모델은 긴 시계열 데이터에서 중요한 패턴을 포착할 수 있으며, 복잡하고 정밀한 예측에 유리

### 분석 과정
1. 원본 데이터 학습 (전처리 없이) 이 방법에서는 원본 데이터를 추가적인 전처리 없이 그대로 사용하여 모델을 학습했다. 데이터는 레이블 0이 약 89,000개, 레이블 1이 약 2,000개로 극단적인 불균형 데이터를 포함하고 있다.
2. Min-Max 스케일링을 통한 데이터 전처리 후 학습 원본 불균형 데이터를 Min-Max 스케일링을 활용하여 값을 정규화한 후 모델을 학습했다. 스케일링을 통해 데이터의 스케일 차이를 해소하고, 모델의 수렴 성능을 향상시키는 것을 목표로 했다.
3. 가중치 조정을 통한 불균형 데이터 학습 불균형 데이터에서 레이블 1의 비율을 증가시키기 위해, 커스텀 함수를 정의하여 레이블 1의 데이터에 3:1 비율로 추가 가중치를 부여했다. 적은 양의 데이터도 잘 학습될 수 있도록 하여 불균형 문제를 해결할 수 있도록 했다.
4. SMOTE를 이용한 데이터 증강 SMOTE(Synthetic Minority Over-sampling Technique) 기법을 사용하여 레이블 1 데이터를 40,000개로 증가시키고, 레이블 0 데이터는 무작위로 40,000개를 추출하여 총 80,000개의 데이터로 학습을 진행했다. 데이터의 불균형을 해결하고 모델의 학습을 보다 균형 잡힌 데이터셋으로 진행할 수 있도록 했다.

### 분석 결과
1. 모든 변수 포함
   
| Metric    | DecisionTree | DecisionTree (max_depth=4) | RandomForest |
|:---------:|:------------:|:--------------------------:|:------------:|
| Accuracy  | 0.9879       | 0.9876                     | 0.9927       |
| F1-score  | 0.8618       | 0.8406                     | 0.9130       |

2. Tryshot_signal(Nan,D) & heating_furnace(Nan,A,B)
   
|                  | heating_furnace (A) | heating_furnace (B) | heating_furnace (NaN) |
|:----------------:|:-------------------:|:-------------------:|:---------------------:|
| Tryshot_signal (NaN) | 0.9633              | 0.9406              | 0.8853                |
| Tryshot_signal (D)   | .                   | .                   | .                     |

## 기대효과

### 공정 규칙 자동화 및 품질 안정화
- Decision Tree 기반의 공정 규칙 자동화를 통해 공정의 일관성을 유지하고, 불량 원인을 명확하게 규명할 수 있다. 이를 통해 품질이 안정화되어 생산품의 신뢰성이 높아진다. 작업자의 경험과는 별개로 데이터 기반 제조 공정을 통해 일관된 품질을 유지할 수 있어 기업의 신뢰도도 높일 수 있다. 검증되고 일관된 품질은 제조업에서 큰 리스크를 가져오는 False positive 문제를 해결하는 중요한 포인트이다. 이 결과를 바탕으로 중소기업이 공정 자동화, 품질 안정화에 있어 데이터 기반의 품질 예측의 필요성을 인식할 수 있다.

### 데이터 기반 의사결정
- 중소 제조기업에 AI 기반 데이터 분석을 도입함으로써 데이터에 기반한 의사결정을 할 수 있도록 돕는다. 특히, Decision Tree와 같은 해석 가능한 모델을 활용하여 작업자가 쉽게 이해할 수 있는 공정 규칙을 생성하면, 비전문가도 공정을 체계적으로 관리할 수 있게 된다. 이를 통해 관리자는 공정의 핵심 변수와 품질 요인을 명확히 파악하고, 일관성 있게 품질을 유지할 수 있는 근거를 마련할 수 있다. 또한, 해석 가능한 AI 모델의 사용은 중소기업 내 AI와 데이터 활용에 대한 신뢰도를 높이는 데 기여한다. 해석 가능한 모델은 주조 공정뿐만 아니라 다른 제조 공정에도 쉽게 적용 가능하며, AI 분석 모델이 타 공정과 다른 분야로 확장될 수 있는 가능성을 제시한다. 해석 가능한 모델 도입은 중소기업 내에 데이터 기반의 의사결정 문화가 정착되도록 돕고, AI 기술의 활용을 촉진하는 효과를 낼 수 있다.
